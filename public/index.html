<html ng-app="app" ng-controller="MainController">
<head>

<title>{{settings.title}}</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>

<link rel="stylesheet" href="/bootstrap/dist/css/bootstrap.min.css"/>
<link rel="stylesheet" href="/bootstrap-material-design/dist/css/bootstrap-material-design.min.css"/>
<link rel="stylesheet" href="/bootstrap-material-design/dist/css/ripples.min.css"/>
<link rel="stylesheet" href="/mdi/css/materialdesignicons.min.css" media="all" type="text/css"/>

<script type="text/javascript" src="/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="/bootstrap/dist/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/bootstrap-material-design/dist/js/material.min.js"></script>
<script type="text/javascript" src="/bootstrap-material-design/dist/js/ripples.min.js"></script>

<script type="text/javascript" src="/angular/angular.min.js"></script>
<script type="text/javascript" src="/marked/marked.min.js"></script>
<script type="text/javascript" src="/angular-marked/dist/angular-marked.min.js"></script>

<link rel="stylesheet" href="/index.css"/>
<script type="text/javascript" src="/index.js"></script>

</head>

<body ng-style="{'background-image':'url(' + settings.backgroundUrl + ')'}">

<div class="modal fade" id="modalAdd">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close">×</button>
        <h4 class="modal-title">Add something</h4>
      </div>
      <div class="modal-body">
        <textarea class="form-control" id="inputContent" rows="5" ng-model="addFormData.content" autofocus></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success" ng-click="addThing()">Save</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modalEdit">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close">×</button>
        <h4 class="modal-title">Edit</h4>
      </div>
      <div class="modal-body">
        <textarea class="form-control" id="inputContent" rows="5" ng-model="editFormData.content" autofocus></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success" ng-click="editThing()">Save</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modalDel">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Really Delete this Thing?</h4>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-danger" ng-click="delThing()">Delete</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modalSettings">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close">×</button>
        <h4 class="modal-title">Settings</h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label for="inputTitle" class="col-sm-2 control-label">Title</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="inputTitle" ng-model="settings.title" placeholder="Title">
            </div>
          </div>
          <div class="form-group">
            <label for="inputBackgroundImage" class="col-sm-2 control-label">Background</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="inputBackgroundImage" ng-model="settings.backgroundUrl" placeholder="url">
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success" ng-click="saveSettings()">Save</button>
      </div>
    </div>
  </div>
</div>

<div class="settings-action">
  <button class="btn btn-default btn-fab" data-toggle="modal" data-target="#modalSettings"><i class="mdi mdi-dots-horizontal"></i></button>
</div>

<div class="container main">
  <div class="row">
    <div class="col-md-2 col-md-offset-5">
        <button class="btn btn-raised btn-block btn-success" data-toggle="modal" data-target="#modalAdd">Add</button>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <div class="form-group has-success">
        <label class="control-label" for="inputFilter">Filter</label>
        <input class="form-control" id="inputFilter" type="text" ng-model="filter" ng-enter="fetchThings()"/>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-2">
      <button class="btn btn-primary btn-sm" ng-repeat="tag in tags" ng-click="addFilterTag(tag)">{{tag.name}}</button>
    </div>
    <div class="col-md-8">
      <div class="well well-sm thing" ng-repeat="thing in things">
          <div class="col-md-12 thing-title-date">
            {{thing.createdAt | prettyDateOffset}}
            <button class="btn btn-xs btn-default" ng-click="showDelThing(thing._id)">delete</button>
            <button class="btn btn-xs btn-default" ng-click="showEditThing(thing._id, thing.content)">edit</button>
        </div>
        <div class="content" marked="thing.richContent"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
